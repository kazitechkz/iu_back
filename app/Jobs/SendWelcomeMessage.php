<?php

namespace App\Jobs;

use Illuminate\Bus\Queueable;
use Illuminate\Contracts\Queue\ShouldBeUnique;
use Illuminate\Contracts\Queue\ShouldQueue;
use Illuminate\Foundation\Bus\Dispatchable;
use Illuminate\Queue\InteractsWithQueue;
use Illuminate\Queue\SerializesModels;
use Illuminate\Support\Facades\Http;

class SendWelcomeMessage implements ShouldQueue
{
    use Dispatchable, InteractsWithQueue, Queueable, SerializesModels;

    public $phone;

    /**
     * Create a new job instance.
     */
    public function __construct($phone)
    {
        $this->phone = $phone;
    }

    /**
     * Execute the job.
     */
    public function handle(): void
    {
        $INSTANCE_ID = env('WB_INSTANCE_ID');
        $ACCESS_TOKEN = env('WB_ACCESS_TOKEN');
        Http::asForm()->post('https://biz.wapico.ru/api/send.php', [
            'number' => str_replace(' ', '', $this->phone),
            'type' => 'text',
            'message' => 'iU test - Ò°Ð‘Ð¢-Ò“Ð° ÐµÒ£ Ð¶Ð°Ò›ÑÑ‹ Ð¾Ð½Ð»Ð°Ð¹Ð½ Ð´Ð°Ð¹Ñ‹Ð½Ð´Ñ‹Ò› Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð°ÑÑ‹Ð½Ð° Ò›Ð¾Ñˆ ÐºÐµÐ»Ð´Ñ–Ò£Ñ–Ð· ðŸ»!
Ð‘Ñ–Ð·Ð´Ñ–Ò£ Ð¿Ð¾Ñ€Ñ‚Ð°Ð»Ð´Ð° ÑÑ–Ð· 50 000-Ð½Ð°Ð½ Ð°ÑÑ‚Ð°Ð¼ Ó©Ð·ÐµÐºÑ‚Ñ– Ñ‚ÐµÑÑ‚ ÑÒ±Ñ€Ð°Ò›Ñ‚Ð°Ñ€Ñ‹Ð½ Ð¶Ó™Ð½Ðµ 16 Ð¿Ó™Ð½ Ð±Ð¾Ð¹Ñ‹Ð½ÑˆÐ° 1 500 Ð¿Ñ‹ÑÑ‹Ò›Ñ‚Ð°Ð»Ò“Ð°Ð½ ÑÐ°Ð±Ð°Ò›Ñ‚Ð°Ñ€Ð´Ñ‹ Ñ‚Ð°Ð±Ð° Ð°Ð»Ð°ÑÑ‹Ð·!ðŸ”¥
Ð‘Ñ–Ð·Ð±ÐµÐ½ Ð±Ñ–Ñ€Ð³Ðµ Ò°Ð‘Ð¢-Ò“Ð° Ð´Ð°Ð¹Ñ‹Ð½Ð´Ñ‹Ò›, Ð±Ò±Ð»:
âš¡ï¸ Ð¾Ð¹Ñ‹Ð½ Ñ‚Ò¯Ñ€Ñ–Ð½Ð´ÐµÐ³Ñ– Ò›Ð°Ð´Ð°Ð¼Ð´Ñ‹Ò› Ð¾Ò›Ñ‹Ñ‚Ñƒ;
âš¡ï¸Ð´ÐµÐ¼Ð¾ Ð½Ò±ÑÒ›Ð°Ð´Ð° Ò°Ð‘Ð¢-Ð½Ñ‹ ÑˆÐµÐºÑÑ–Ð· Ñ‚Ð°Ð¿ÑÑ‹Ñ€Ñƒ;
âš¡ï¸ÒšÐ°Ñ‚ÐµÐ»Ñ–ÐºÑ‚ÐµÑ€Ð¼ÐµÐ½ Ð¶Ò±Ð¼Ñ‹Ñ Ñ–ÑÑ‚ÐµÑƒ Ð¼Ò¯Ð¼ÐºÑ–Ð½Ð´Ñ–Ð³Ñ–;
âš¡ï¸Ð¡Ñ–Ð·Ð´Ñ–Ò£ Ò¯Ð»Ð³ÐµÑ€Ñ–Ð¼Ñ–Ò£Ñ–Ð·Ð´Ñ– Ñ‚Ð°Ð»Ð´Ð°Ñƒ Ð¶Ó™Ð½Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑˆÑ‹Ò“Ð°Ñ€Ñƒ;
âš¡ï¸Ó˜Ð»ÑÑ–Ð· Ñ‚Ð°Ò›Ñ‹Ñ€Ñ‹Ð¿Ñ‚Ð°Ñ€ Ð±Ð¾Ð¹Ñ‹Ð½ÑˆÐ° Ñ‚ÐµÑÑ‚Ñ‚ÐµÑ€Ð´Ñ– Ð¶ÐµÐºÐµ Ñ‚Ð°Ò£Ð´Ð°Ñƒ;
âš¡ï¸ÐšÓ™ÑÑ–Ð±Ð¸ Ð¾Ò›Ñ‹Ñ‚ÑƒÑˆÑ‹Ð»Ð°Ñ€Ð´Ñ‹Ò£ Ð±ÐµÐ¹Ð½Ðµ ÑÐ°Ð±Ð°Ò›Ñ‚Ð°Ñ€Ñ‹.
Ð‘Ñ–Ð·Ð´Ðµ ÑÑ–Ð· Ð¾Ò›Ñƒ, Ñ‚ÑƒÑ€Ð½Ð¸Ñ€Ð»ÐµÑ€Ð³Ðµ Ò›Ð°Ñ‚Ñ‹ÑÑƒ Ð¶Ó™Ð½Ðµ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ÑƒÐ°Ð»Ð´Ñ‹ Ð¾Ð¹Ñ‹Ð½Ð´Ð°Ñ€ Ð¾Ð¹Ð½Ð°Ñƒ Ð°Ñ€Ò›Ñ‹Ð»Ñ‹ Ò›Ò±Ð½Ð´Ñ‹ ÑÑ‹Ð¹Ð»Ñ‹Ò›Ñ‚Ð°Ñ€ Ò±Ñ‚Ñ‹Ð¿ Ð°Ð»Ð° Ð°Ð»Ð°ÑÑ‹Ð·.

Ð¡Ð¾Ð½Ð´Ð°Ð¹-Ð°Ò›, ÐºÓ™ÑÑ–Ð¿Ñ‚Ñ–Ðº Ð±Ð°Ò“Ð´Ð°Ñ€Ð»Ð°Ñƒ Ñ‚ÐµÑÑ‚Ñ‚ÐµÑ€Ñ–Ð½ Ñ‚Ð°Ð¿ÑÑ‹Ñ€Ñƒ Ð°Ñ€Ò›Ñ‹Ð»Ñ‹ ÑÑ–Ð· Ó©Ð·Ñ–Ò£Ñ–Ð·Ð´Ñ–Ò£ ÐºÒ¯ÑˆÑ‚Ñ– Ð¶Ð°Ò›Ñ‚Ð°Ñ€Ñ‹Ò£Ñ‹Ð·Ð´Ñ‹ Ð°Ð½Ñ‹Ò›Ñ‚Ð°Ð¹ Ð°Ð»Ð°ÑÑ‹Ð·ðŸ’ª Ð¶Ó™Ð½Ðµ Ð°Ñ€Ð¼Ð°Ð½Ð´Ð°Ò“Ð°Ð½ Ð¼Ð°Ð¼Ð°Ð½Ð´Ñ‹Ò›Ñ‚Ñ‹ Ð°Ð½Ñ‹Ò›Ñ‚Ð°Ð¹ Ð°Ð»Ð°ÑÑ‹Ð·.â€¦

ÒšÒ±Ñ€Ð¼ÐµÑ‚Ð¿ÐµÐ½, iU testðŸ»!',
            'instance_id' => $INSTANCE_ID,
            'access_token' => $ACCESS_TOKEN
        ]);
        Http::asForm()->post('https://biz.wapico.ru/api/send.php', [
            'number' => str_replace(' ', '', $this->phone),
            'type' => 'text',
            'message' => 'Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð½Ð° Ð»ÑƒÑ‡ÑˆÑƒÑŽ Ð¾Ð½Ð»Ð°Ð¹Ð½-Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ñƒ Ð¿Ð¾ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐµ Ðº Ð•ÐÐ¢ - iU testðŸ»!
ÐÐ° Ð½Ð°ÑˆÐµÐ¼ Ð¿Ð¾Ñ€Ñ‚Ð°Ð»Ðµ Ð²Ñ‹ Ð½Ð°Ð¹Ð´ÐµÑ‚Ðµ Ð±Ð¾Ð»ÐµÐµ 50 000 Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð¸ 1 500 Ð¿Ñ€Ð¾Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑƒÑ€Ð¾ÐºÐ¾Ð² Ð¿Ð¾ 16 Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð°Ð¼!ðŸ”¥
ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ðº Ð•ÐÐ¢ Ñ Ð½Ð°Ð¼Ð¸, ÑÑ‚Ð¾:
âš¡ï¸ Ð¿Ð¾ÑˆÐ°Ð³Ð¾Ð²Ð¾Ðµ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð² Ð¸Ð³Ñ€Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ðµ;
âš¡ï¸Ð±ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ð°Ñ ÑÐ´Ð°Ñ‡Ð° Ð¿Ñ€Ð¾Ð±Ð½Ñ‹Ñ… Ð•ÐÐ¢ Ð² Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¼ Ñ‚Ñ€ÐµÐ½Ð°Ð¶ÐµÑ€Ðµ;
âš¡ï¸Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð½Ð°Ð´ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ð¼Ð¸;
âš¡ï¸ÐÐ½Ð°Ð»Ð¸Ð· Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð²Ð°ÑˆÐµÐ¹ ÑƒÑÐ¿ÐµÐ²Ð°ÐµÐ¼Ð¾ÑÑ‚Ð¸;
âš¡ï¸Ð˜Ð½Ð´Ð¸Ð²Ð¸Ð´ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð´Ð±Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð² Ð¿Ð¾ ÑÐ»Ð°Ð±Ñ‹Ð¼ Ñ‚ÐµÐ¼Ð°Ð¼;
âš¡ï¸Ð’Ð¸Ð´ÐµÐ¾ÑƒÑ€Ð¾ÐºÐ¸ Ð¾Ñ‚ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ñ€ÐµÐ¿ÐµÑ‚Ð¸Ñ‚Ð¾Ñ€Ð¾Ð².
Ð£ Ð½Ð°Ñ Ñ‚Ñ‹ Ð¼Ð¾Ð¶ÐµÑˆÑŒ Ð·Ð°Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð¸ Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ Ñ†ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð·Ñ‹ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñ Ð¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ, ÑƒÑ‡Ð°ÑÑ‚Ð²ÑƒÑ Ð² Ñ‚ÑƒÑ€Ð½Ð¸Ñ€Ð°Ñ… Ð¸ Ð¸Ð³Ñ€Ð°Ñ Ð² Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð³Ñ€Ñ‹.

Ð¢Ð°ÐºÐ¶Ðµ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ñ Ð¿Ñ€Ð¾Ñ„Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ñ‚Ñ‹ ÑÐ¼Ð¾Ð¶ÐµÑˆÑŒ Ð²Ñ‹ÑÐ²Ð¸Ñ‚ÑŒ ÑÐ²Ð¾Ð¸ ÑÐ¸Ð»ÑŒÐ½Ñ‹Ðµ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñ‹ðŸ’ª Ð¸ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„ÐµÑÑÐ¸ÑŽ ÑÐ²Ð¾ÐµÐ¹ Ð¼ÐµÑ‡Ñ‚Ñ‹â€¦

Ð¡ ÑƒÐ²Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼, iU testðŸ»!',
            'instance_id' => $INSTANCE_ID,
            'access_token' => $ACCESS_TOKEN
        ]);
    }
}
